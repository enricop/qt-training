%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Copyright (c) 2008-2011, Nokia Corporation and/or its subsidiary(-ies).
% All rights reserved.
%
% This work, unless otherwise expressly stated, is licensed under a
% Creative Commons Attribution-ShareAlike 2.5.
%
% The full license document is available from
% http://creativecommons.org/licenses/by-sa/2.5/legalcode .
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Anchor Layout}

%----------------------------------------------------------------------

\begin{slide}{1680}
\frametitle{Anchors}

\begin{itemize}
\item Used to position and align items
\item Line up edges or central lines of items
\item \texttt{anchors}, an attached property, can specify
\begin{itemize}
\item A position in another item: (\texttt{centerIn}, \texttt{fill})
\item An \qic{type}{AnchorLine} of another item: (\texttt{left}, \texttt{top})
\end{itemize}
\end{itemize}
\begin{flushright}
AnchorLines: \hspace{1in} \\
\flushedImageDoubleWidth{qml-composing-uis/images/edges-qml.pdf}
\end{flushright}
\doc{anchor-layout.html}{Anchor-based Layout}
\end{slide}

%----------------------------------------------------------------------

\begin{slide}{1679}
\frametitle{\texttt{anchors.centerIn}}

\flushedImage{qml-composing-uis/images/anchors.pdf}
% declarative-uis/composing-uis/anchors.qml
\inputqml{qml-composing-uis/colorized/anchors}

\begin{itemize}
\item \texttt{anchors.centerIn} centers the \qic{class}{Text}
element in the \qic{class}{Rectangle}
  \begin{itemize}
  \item refers to an Item, not an AnchorLine
  \end{itemize}
\end{itemize}                              
\demo{qml-composing-uis/ex-anchor-layout/anchors.qml}
\end{slide}

%----------------------------------------------------------------------

\begin{slide}{1678}
\frametitle{Anchors and \texttt{parent}}

\flushedImage{qml-composing-uis/images/anchors.pdf}
% declarative-uis/composing-uis/anchors2.qml
\inputqml{qml-composing-uis/colorized/anchors2}

\begin{itemize}
\item Each element can refer to its parent element
  \begin{itemize}
  \item using the \texttt{parent} ID
  \end{itemize}
\item Can refer to ancestors and named children of ancestors
\end{itemize}                               

\demo{qml-composing-uis/ex-anchor-layout/anchors2.qml}

\end{slide}

%----------------------------------------------------------------------

\begin{slide}{1677}
\frametitle{Connecting AnchorLines together}

\flushedImage{qml-composing-uis/images/anchor-to-anchor.pdf}
% declarative-uis/composing-uis/anchor-to-anchor.qml
\inputqml{qml-composing-uis/colorized/anchor-to-anchor}

\begin{itemize}
\item AnchorLines must be parallel
  \begin{itemize}
  \item \texttt{right} to \texttt{left} but not \texttt{bottom}
  \end{itemize}
\item AnchorLines of other items are referred to directly:
  \begin{itemize}
  \item use \qtt{parent.right}, not \qtt{parent.anchors.right}
  \end{itemize}
\end{itemize}
\demo{qml-composing-uis/ex-anchor-layout/anchor-to-anchor.qml}
\end{slide}

%----------------------------------------------------------------------

\begin{slide}{1668}
\frametitle{Margins}

\begin{itemize}
\item Used with anchors to add space
\item Specify distances
  \begin{itemize}
  \item in pixels
  \item between elements connected with anchors
  \end{itemize}
\end{itemize}

\centeredImageDoubleWidth{qml-composing-uis/images/margins-qml.pdf}

\end{slide}

%----------------------------------------------------------------------

\begin{slide}{1667}
\frametitle{Margins and \texttt{baseLine}}
\begin{itemize}
\item \texttt{baseLine} is another AnchorLine
\end{itemize}
\flushedImage{qml-composing-uis/images/alignment}
% declarative-uis/composing-uis/alignment.qml
\inputqml{qml-composing-uis/colorized/alignment}

\demo{qml-composing-uis/ex-anchor-layout/alignment.qml}
\end{slide}

%----------------------------------------------------------------------

\begin{slide}{1666}
\frametitle{Hints and Tips~\textendash~Anchors}

\begin{itemize}
\item Anchors can only be used with parent and sibling items
\item Anchors work on constraints
  \begin{itemize}
  \item some items need to have well-defined positions and sizes
  \item items without default sizes should be anchored to fixed or well-defined items
  \end{itemize}
\item Anchors creates dependencies on geometries of other items
  \begin{itemize}
  \item creates an order in which geometries are calculated
  \item avoid creating circular dependencies
    \begin{itemize}
    \item e.g., parent $\rightarrow$ child $\rightarrow$ parent
    \end{itemize}
  \end{itemize}
\item Margins are only used if the corresponding anchors are used
  \begin{itemize}
  \item e.g., \qic{type}{leftMargin} needs \qic{type}{left} to be defined
  \end{itemize}
\end{itemize}

\end{slide}

%----------------------------------------------------------------------

\begin{slide}{1665}
\frametitle{Strategies for Use~\textendash~Anchors}

Identify Items with different roles in the user interface:

\begin{itemize}
\item Fixed items
  \begin{itemize}
  \item make sure these have \qic{type}{id} defined
  \item unless these items can easily be referenced as parent items
  \end{itemize}
\item Items that dominate the user interface
  \begin{itemize}
  \item make sure these have \qic{type}{id} defined
  \end{itemize}
\item Items that react to size changes of the dominant items
  \begin{itemize}
  \item give these anchors that refer to the dominant or fixed items
  \end{itemize}
\end{itemize}

\end{slide}      

%----------------------------------------------------------------------
\begin{slide}{7980}
\frametitle{Exercise~\textendash~Colors and Gradients}

\begin{enumerate}
\item How else can you write these colors?
  \begin{itemize}
  \item \qic{string}{"blue"} % "#0000ff", Qt.rgba(0,0,1,1)
  \item \qic{string}{"\#ff0000"} % "red", Qt.rgba(1,0,0,1)
  \item \qtt{\qc{class}{Qt}.rgba(\qc{number}{0},\qc{number}{0.5},\qc{number}{0},\qc{number}{1})}
  \end{itemize}
\item How would you create these items using the \qic{type}{gradient} property?\\
\centeredImageDoubleWidth{qml-composing-uis/images/colors-and-gradients.png}
\item Describe another way to create these gradients?
% Using pre-defined images, optionally with rotation.
\end{enumerate}

\end{slide}

%----------------------------------------------------------------------
\begin{slide}{1663}
\frametitle{Exercise~\textendash~Images and Text}

\begin{enumerate}
\item When creating an \qic{class}{Image}, how do you specify the location of
the image file?
% Using the source property, containing a URL or path relative to the location
% of the .qml file.
\item By default, images are rotated about a point inside the image. Where is
this point?
% The center of the image.
\item How do you change the text in a \qic{class}{Text} element?
% Yes, but only programmatically.
\end{enumerate}

\end{slide}

%----------------------------------------------------------------------
\begin{slide}{1676}
\frametitle{Lab~\textendash~Images,~Text~and~Anchors}

\centeredImageDoubleWidth{qml-composing-uis/images/text-images-anchors.png}

\begin{itemize}
\item Create a user interface similar to the one shown above.
\item Hint: Use the background image supplied in the common \qtt{images} directory.
\end{itemize}
\vspace*{-0.5em}
\begin{center}
\image{qml-composing-uis/images/text-images-anchors-hint1.png}
\hspace*{0.5em}
\image{qml-composing-uis/images/text-images-anchors-hint2.png}
\hspace*{0.5em}
\image{qml-composing-uis/images/text-images-anchors-hint3.png}
\end{center}
\vspace*{-0.5em}
\lab{qml-composing-uis/lab-text-images-anchors}
\end{slide}

